# ICPC 模板库贡献指南

## 项目简介

ICPC 模板库旨在沉淀常见算法与数据结构的高质量实现, 方便竞赛选手在训练与比赛中快速调用。仓库中的模板均以 C++ 实现, 遵循 GPL 开源协议, 并通过注释记录作者、复杂度、发布日期等元数据, 便于审计与维护。

## 仓库结构

| 目录 | 含义 | 典型模板 |
| --- | --- | --- |
| `动态规划/` | 动态规划相关模板, 包含 LIS、树形背包、数位 DP 等。 | `动态规划/最长上升子序列.cpp` |
| `字符串/` | 字符串匹配、哈希等算法。 | `字符串/双哈希.cpp` |
| `图论/` | 图论基础算法与树分治相关模板。 | `图论/Tarjan求LCA.cpp` |
| `数据结构/` | 常用数据结构及其维护方法。 | `数据结构/并查集.cpp` |
| `杂项/` | 其他工具类模板, 如 `modint`、莫队、代码哈希工具等。 | `杂项/modint.cpp` |
| `LICENSE` | 项目使用的 GPL 许可证文本。 | - |

> 所有模板均以 `.cpp` 结尾, 每个文件只实现一个相对独立的算法或数据结构。

## 开发环境与依赖

- **语言标准**: 推荐使用 `C++17` 及以上版本。
- **标准库**: 模板默认依赖 `<vector>`, `<algorithm>`, `<utility>` 等常见 STL 头文件, 为保持模板的纯净度, 文件内部通常不显式 `#include` 头文件, 由使用者在集成时统一引入。
- **哈希工具**: `杂项/代码哈希.cpp` 用于生成模板的哈希值, 以保证抄写或迁移过程的正确性。

## 新增模板流程

1. **规划算法**
   - 确认仓库内是否已有对应实现, 避免重复。
   - 设计好接口形式 (函数、类或命名空间) 以及所需的输入输出格式。

2. **选择目录与文件名**
   - 根据算法类型放入合适的目录 (例如, 树形 DP 放在 `动态规划/`, LCA 放在 `图论/`)。
   - 文件名使用简体中文描述算法要点, 以半角字符连接, 结尾固定为 `.cpp`。示例: `动态规划/树上背包.cpp`。
   - 若需要新建目录, 请确保目录名称语义清晰, 并在 README 的目录表及模板清单中同步说明。

3. **编写模板**
   - 保持单文件结构, 每个文件只包含一个主要算法或数据结构。
   - 必要时可以写出一个轻量的辅助类/函数, 但避免引入不相关的功能。
   - 尽量避免全局变量; 如确需使用, 必须在文件注释或接口说明中明确变量含义与使用前置条件。
   - 不使用 `using namespace std;`, 全部类型与函数通过 `std::` 前缀访问。
   - 模板默认不依赖异常处理、动态 RTTI 或线程相关特性。

4. **补充文件头注释**
   - 每个模板文件都需要带有完整的元信息注释, 结构如下:

     ```cpp
     /*
     Author: <你的署名>
     Contact Method: <联系方式, 建议邮箱>
     Function: <模板的功能简述, 可说明输入输出约定>
     Time Complexity: <渐进复杂度, 可区分预处理与查询>
     Hash Value: <通过工具生成的 16 进制哈希串>
     Date: <YYYY/M/D>
     Open Source License: GPL
     */
     ```

   - 如算法含有额外约束 (例如下标从 1 开始, 需要预先构建图等), 请在 `Function` 中说明。

5. **生成哈希值**
   - 使用 `杂项/代码哈希.cpp` 对模板生成哈希值。推荐流程:

     ```bash
     g++ -std=c++17 -O2 杂项/代码哈希.cpp -o hash_tool
     ./hash_tool < 待生成哈希的模板.cpp
     ```

   - 该程序会输出形如 `Hash Value: 481f715f340ee766` 的结果。若在 Linux/macOS 环境运行, 请注释或删除源码中的 `system("pause");` 行后再编译。
   - 将输出结果填入文件头注释中的 `Hash Value` 字段。

6. **自测与示例**
   - 在提交前, 至少通过一个独立的测试程序验证模板的正确性。
   - 若算法较为复杂, 建议在文件末尾以注释形式附上最小使用示例或常见坑提示。

7. **更新文档**
   - 在本文档的 “现有模板清单” 中补充新的模板条目。
   - 如新增了新类别或对原有分类进行了调整, 需同步更新上文的目录说明表。

8. **提交更改**
   - 确保仓库可以在 `g++ -std=c++17` 环境下编译通过 (如适用)。
   - 提交信息应清晰描述所添加或修改的模板与用途。

## 代码风格细则

- **缩进与空格**: 统一使用 4 个空格缩进, 不使用制表符。运算符两侧适量留空, 便于阅读。
- **命名约定**: 类名、结构体名使用 `CamelCase`, 函数与变量倾向于 `lower_snake_case` 或简洁的单词组合, 与现有文件保持一致。
- **接口设计**: 优先提供可复用的函数/类接口, 减少强耦合的全局常量或宏定义。
- **标准库使用**: 使用 STL 提供的数据结构与算法, 避免编写重复的基础工具。
- **注释**: 对关键步骤、边界处理给予必要注释, 解释算法思路或实现细节。

## 测试与验证建议

- 结合公开题库的样例或自定义数据进行回归测试。
- 重点关注:
  - 极端输入规模 (最大/最小值)。
  - 多种边界条件 (空图、全相等等)。
  - 模板提供的所有接口是否都被覆盖测试。
- 可将测试代码暂存于个人分支或本地, 不纳入仓库, 保持模板文件的纯净度。

## 哈希工具使用补充

- 若需批量计算多个文件的哈希, 可编写简单脚本顺序调用 `hash_tool`。
- 当模板发生任何修改 (包括注释), 请重新计算哈希值并更新文件头注释。
- 若对哈希算法进行调整, 需要在 README 中记录新的流程, 并为既有模板重新生成哈希。

## 现有模板清单

以下清单反映了当前仓库中模板的覆盖范围, `√` 表示已经实现:

### 动态规划

#### 普通 DP

- **LIS** √
- **LCS** √
- **分拆数** √

#### 背包 DP

- **多重背包** √
- **背包的最优方案数** √

#### 树形 DP

- **树上背包** √
- **换根 DP** √

#### 状压 DP

- **轮廓线 DP**
- 插头 DP

#### 数位 DP

- **相邻数位限制** √

#### 动态 DP

- **线段树维护转移矩阵**

#### DP 优化

- **分治转移**
- **斜率优化**
- 二分队列
- 二分栈
- 凸优化

### 字符串

#### 势能优化

- **Boder 数组** √
- 可持久化 KMP
- Boyer-Moore 算法
- **Z 函数**
- **Manacher 算法**
- 基本子串字典
- ALCS

#### 哈希

- **多哈希** √
- **哈希表**
- **子串哈希** √
- **结构哈希**

#### 自动机

- **trie 树**
- **AC 自动机**
- 回文树
- 序列自动机

#### 后缀理论

- 后缀数组
- 后缀树
- **后缀自动机**
- 后缀平衡树
- 广义后缀自动机
- Shift And

#### 表示法

- 最小表示法
- Lyndon 分解
- Main–Lorentz 算法

### 基础数学

#### 集合与进制

- **子集枚举**
- **求 1 的个数**
- **求前后缀 0 的个数**
- 遍历所有掩码的子掩码
- 平衡三进制
- **高精度($10^k$ 进制)**

#### 乘法与幂加速

- **普通快速幂**
- **矩阵快速幂**
- **矩阵乘转向量乘矩阵**
- 点集变换加速
- 快速乘
- 同一底数与同一模数的预处理快速幂

#### 数论

- **线性推任意 n 个数的逆元**
- **Miller–Rabin**
- **gcd & exgcd**
- **区间 gcd 的处理**
- 万能欧几里得
- **ax + by + c = 0 整数解**
- **数论分块**
- **欧拉定理 & 拓展欧拉定理**
- Meissel–Lehmer
- **Pollard Rho**
- **裴蜀定理**
- **类欧几里得算法**
- **线性同余方程**
- **中国剩余定理**
- 更多数论内容筹备中……

### 图论

#### 树与森林

- **树链剖分**
- **树的直径**
- **重心**
- **长链剖分**
- **动态点分治**
- **树的最小支配点集**
- **支配树**
- **仙人掌图**
- **斯坦纳树**
- **最小直径生成树**
- **瓶颈生成树**
- **环计数**
- 图的着色
- 最大团搜索算法
- **点覆盖**

#### 连通性

- **强连通分量**
- **点双连通分量**
- **边双连通分量**
- **割点和桥**
- 圆方树
- 点 / 边连通度
- **2 - SAT**
- **独立集**
- 动态桥边数量

#### 特殊图

- **欧拉图**
- **哈密顿图**
- **二分图**
- **平面图**
- 弦图
- 强连通竞赛图哈密顿回路

#### 网络流

- **最大流**
- **最小割**
- **费用流**
- **上下界网络流**
- Stoer–Wagner 算法
- 线性规划转费用流
- KM

#### 图匹配

- **二分图最大匹配**
- **hall 定理**
- **二分图最大权匹配**
- 一般图匹配
- 一般图最大权匹配
- hopcroft

### 计算几何

#### 基本几何对象和操作

- **点与线的表示**
- **距离与旋转**
- **点积与叉积**
- **浮点数等于 0**
- **点判等与点在线段上**
- **线段判交**
- **直线求交**
- **点到线段的距离**
- 球缺
- 圆的面积并

#### 凸包

- **求凸包**
- **判断点是否在凸包内**
- **计算任意多边形面积**
- **点到凸包的切线**
- **闵可夫斯基和**
- **凸包判交**
- 三维凸包
- 曼哈顿凸包
- **动态凸包**

#### 其他算法

- **扫描线**
- **半平面交**
- Voronoi 图
- **平面图欧拉公式**
- **点在多边形内**
- **最小圆覆盖**
- **最小矩形覆盖**
- **pick 定理**
- **三角剖分**
- **旋转卡壳**
- 随机增量法
- 反演变换
- 平面图分割
- 四面体内切球公式
- 长方体表面两点距离
- 经纬度求球面最短距离
- **欧几里得最小生成树**
- 三维投影平面
- 木棍拼面积最大的多边形

### 杂项

- **反悔贪心**
- **莫队**
  - **普通莫队** √
  - **带修莫队**
  - **树上莫队**
  - 回滚莫队
  - 二维莫队
  - 二次离线
- 模拟退火
- 爬山算法
- **modint** √
- **快速 IO** √
- **离散化** √
- **悬线法** √
- **cdq 分治**
- **整体二分**
- **分数规划**
- **约瑟夫问题**
- **格雷码**
- **表达式求值**
- **主元素问题**
- Garsia–Wachs 算法
- 15-puzzle
- Kahan 求和
- **珂朵莉树**

---

欢迎贡献新的模板或完善现有实现, 让这份模板库更加完善、可靠。
